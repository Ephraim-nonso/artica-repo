{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n  var _this = this;\n  if (timeoutError === void 0) {\n    timeoutError = new Error('timeout');\n  }\n  return {\n    acquire: function () {\n      return new Promise(function (resolve, reject) {\n        return tslib_1.__awaiter(_this, void 0, void 0, function () {\n          var isTimeout, ticket, release;\n          return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                isTimeout = false;\n                setTimeout(function () {\n                  isTimeout = true;\n                  reject(timeoutError);\n                }, timeout);\n                return [4 /*yield*/, sync.acquire()];\n              case 1:\n                ticket = _a.sent();\n                if (isTimeout) {\n                  release = Array.isArray(ticket) ? ticket[1] : ticket;\n                  release();\n                } else {\n                  resolve(ticket);\n                }\n                return [2 /*return*/];\n            }\n          });\n        });\n      });\n    },\n\n    runExclusive: function (callback) {\n      return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var release, ticket;\n        return tslib_1.__generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              release = function () {\n                return undefined;\n              };\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1,, 7, 8]);\n              return [4 /*yield*/, this.acquire()];\n            case 2:\n              ticket = _a.sent();\n              if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n              release = ticket[1];\n              return [4 /*yield*/, callback(ticket[0])];\n            case 3:\n              return [2 /*return*/, _a.sent()];\n            case 4:\n              release = ticket;\n              return [4 /*yield*/, callback()];\n            case 5:\n              return [2 /*return*/, _a.sent()];\n            case 6:\n              return [3 /*break*/, 8];\n            case 7:\n              release();\n              return [7 /*endfinally*/];\n            case 8:\n              return [2 /*return*/];\n          }\n        });\n      });\n    },\n\n    release: function () {\n      sync.release();\n    },\n    isLocked: function () {\n      return sync.isLocked();\n    }\n  };\n}\nexports.withTimeout = withTimeout;","map":{"version":3,"names":["Object","defineProperty","exports","value","withTimeout","tslib_1","require","sync","timeout","timeoutError","_this","Error","acquire","Promise","resolve","reject","__awaiter","isTimeout","ticket","release","__generator","_a","label","setTimeout","sent","Array","isArray","runExclusive","callback","undefined","trys","push","isLocked"],"sources":["C:/Users/hp/OneDrive/Desktop/Artica/artica-repo/frontend/node_modules/async-mutex/lib/withTimeout.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.withTimeout = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\r\nfunction withTimeout(sync, timeout, timeoutError) {\r\n    var _this = this;\r\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\r\n    return {\r\n        acquire: function () {\r\n            return new Promise(function (resolve, reject) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                var isTimeout, ticket, release;\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            isTimeout = false;\r\n                            setTimeout(function () {\r\n                                isTimeout = true;\r\n                                reject(timeoutError);\r\n                            }, timeout);\r\n                            return [4 /*yield*/, sync.acquire()];\r\n                        case 1:\r\n                            ticket = _a.sent();\r\n                            if (isTimeout) {\r\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\r\n                                release();\r\n                            }\r\n                            else {\r\n                                resolve(ticket);\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            }); });\r\n        },\r\n        runExclusive: function (callback) {\r\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n                var release, ticket;\r\n                return tslib_1.__generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            release = function () { return undefined; };\r\n                            _a.label = 1;\r\n                        case 1:\r\n                            _a.trys.push([1, , 7, 8]);\r\n                            return [4 /*yield*/, this.acquire()];\r\n                        case 2:\r\n                            ticket = _a.sent();\r\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\r\n                            release = ticket[1];\r\n                            return [4 /*yield*/, callback(ticket[0])];\r\n                        case 3: return [2 /*return*/, _a.sent()];\r\n                        case 4:\r\n                            release = ticket;\r\n                            return [4 /*yield*/, callback()];\r\n                        case 5: return [2 /*return*/, _a.sent()];\r\n                        case 6: return [3 /*break*/, 8];\r\n                        case 7:\r\n                            release();\r\n                            return [7 /*endfinally*/];\r\n                        case 8: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        release: function () {\r\n            sync.release();\r\n        },\r\n        isLocked: function () { return sync.isLocked(); },\r\n    };\r\n}\r\nexports.withTimeout = withTimeout;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}