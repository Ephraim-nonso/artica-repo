"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var z=require("events"),Et=require("@walletconnect/keyvaluestorage"),M=require("@walletconnect/heartbeat"),l=require("@walletconnect/logger"),A=require("@walletconnect/types"),re=require("@walletconnect/safe-json"),bt=require("@walletconnect/relay-auth"),o=require("@walletconnect/utils"),mt=require("uint8arrays"),u=require("@walletconnect/time"),ft=require("@walletconnect/jsonrpc-provider"),m=require("@walletconnect/jsonrpc-utils"),wt=require("@walletconnect/jsonrpc-ws-connection"),vt=require("lodash.isequal");function k(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function It(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var i=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var Rt=k(z),_t=k(Et),Y=It(bt),Ct=k(wt),Tt=k(vt);function St(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),a=n.charCodeAt(0);if(t[a]!==255)throw new TypeError(n+" is ambiguous");t[a]=s}var h=r.length,c=r.charAt(0),d=Math.log(h)/Math.log(256),p=Math.log(256)/Math.log(h);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var E=0,L=0,I=0,T=g.length;I!==T&&g[I]===0;)I++,E++;for(var S=(T-I)*p+1>>>0,w=new Uint8Array(S);I!==T;){for(var O=g[I],N=0,R=S-1;(O!==0||N<L)&&R!==-1;R--,N++)O+=256*w[R]>>>0,w[R]=O%h>>>0,O=O/h>>>0;if(O!==0)throw new Error("Non-zero carry");L=N,I++}for(var P=S-L;P!==S&&w[P]===0;)P++;for(var V=c.repeat(E);P<S;++P)V+=r.charAt(w[P]);return V}function b(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var E=0;if(g[E]!==" "){for(var L=0,I=0;g[E]===c;)L++,E++;for(var T=(g.length-E)*d+1>>>0,S=new Uint8Array(T);g[E];){var w=t[g.charCodeAt(E)];if(w===255)return;for(var O=0,N=T-1;(w!==0||O<I)&&N!==-1;N--,O++)w+=h*S[N]>>>0,S[N]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=O,E++}if(g[E]!==" "){for(var R=T-I;R!==T&&S[R]===0;)R++;for(var P=new Uint8Array(L+(T-R)),V=L;R!==T;)P[V++]=S[R++];return P}}}function K(g){var E=b(g);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:b,decode:K}}var Ot=St,Pt=Ot;const ne=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},At=r=>new TextEncoder().encode(r),xt=r=>new TextDecoder().decode(r);class Nt{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Lt{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ae(this,e)}}class zt{constructor(e){this.decoders=e}or(e){return ae(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ae=(r,e)=>new zt({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Ut{constructor(e,t,i,s){this.name=e,this.prefix=t,this.